window.C42=window.C42||{},C42.SimpleCache=function(){"use strict";var a=!1,b=function(){return{log:function(){a&&console.log.apply(console,arguments)},warn:function(){a&&console.warn.apply(console,arguments)},error:function(){a&&console.error.apply(console,arguments)}}}(),c=function(a){var c="SimpleCache::validateOptions";return void 0===a.cache?(b.warn(c+" : No cache. Required field"),!1):a.cachedObjectName?a.cacheInvalidators?"string"!=typeof a.cachedObjectName?(b.warn(c+" : No valid cachedObjectName"),!1):Array.isArray(a.cacheInvalidators)?0===a.cacheInvalidators.length?(b.warn(c+" : Empty cacheInvalidators. Not allowed to add a cached object without invalidators. To store data, use the store."),!1):!0:(b.warn(c+" : No valid cacheInvalidators. Should be an Array"),!1):(b.warn(c+" : No cacheInvalidators. Required field"),!1):(b.warn(c+" : No cachedObjectName. Required field"),!1)},d=function(a,b){for(var d,e=b.length-1;e>=0;e--)d=b[e],void 0!==h[d]?h[d].includes(a)||h[d].push(a):h[d]=[a]},e=function(a,b){var d,e;if(b&&b.length&&0!==b.length)for(var f=b.length-1;f>=0;f--)d=b[f],void 0!==h[d]&&(e=h[d].indexOf(a),-1!==e&&(h[d].splice(e,1),0===h[d].length&&delete h[d]));else for(var g=[],i=Object.keys(h),j=0;j<i.length;j++)d=i[j],h[d].includes(a)&&(h[d].splice(h[d].indexOf(a),1),0===h[d].length&&delete g[d])},f=[],g=[],h={};return{add:function(a){var e="SimpleCache::set";return a&&c(a)?(a.lastUpdate=new Date,a.valid=!0,g.includes(a.cachedObjectName)?(b.warn(e+" : Trying to add to the cache: '"+a.cachedObjectName+"'. It is already cached."),!1):(d(a.cachedObjectName,a.cacheInvalidators),f.push(a),g.push(a.cachedObjectName),!0)):(b.error(e+" : No valid cacheSetup provided updating a chached object"),!1)},update:function(a){var d="C42.SimpleCache::update";if(!a||!c(a))return b.error(d+" : No valid cacheSetup provided updating a chached object"),!1;if(!g.includes(a.cachedObjectName))return b.error(d+" : Trying to update '"+a.cachedObjectName+"'. It is not cached."),!1;a.lastUpdate=new Date,a.valid=!0;for(var k,e=g.indexOf(a.cachedObjectName),j=Object.keys(h),l=0;l<j.length;l++)invalidator=j[l],h[invalidator].includes(a.cachedObjectName)&&(a.cacheInvalidators.includes(invalidator)||(k=h[invalidator].indexOf(a.cachedObjectName),h[invalidator].splice(k,1),0===h[invalidator].length&&delete h[invalidator]));for(var m,n=0;n>a.cacheInvalidators.length;n++)m=a.cacheInvalidators[n],j.includes(m)?h[m].includes(a.cachedObjectName)||h[m].push(a.cachedObjectName):h[m]=[a.cachedObjectName];return f[e]=a,!0},remove:function(a){var c="SimpleCache::remove";if(!g.includes(a))return b.error(c+" : Trying to remove '"+a+"'. It is not cached."),!1;var d=g.indexOf(a);return e(f[d].cachedObjectName,f[d].cacheInvalidators),f.splice(d,1),g.splice(d,1),!0},invalidate:function(a){var c="SimpleCache::invalidate";if("string"==typeof a&&void 0===h[a])return b.warn(c+" : Trying to invalidate with the '"+a+"'. Not found"),!1;for(var j,i=h[a].slice(0),k=0;k<i.length;k++){if(j=i[k],!g.includes(j))return b.error(c+" : Trying to invalidator '"+j+"'. It is not cached."),!1;var l=g.indexOf(j);f.splice(l,1),g.splice(l,1),e(j)}return!0},get:function(a){var c="SimpleCache::get",d=g.indexOf(a);if(void 0!==d&&-1!==d){if(f[d].cachedObjectName===a)return f[d].cache;b.error(c+" : Indexs are broken. Restart component is required;")}},getAll:function(){for(var b={},c=0;c<f.length;c++)b[f[c].cachedObjectName]=f[c].cache;return b}}}();