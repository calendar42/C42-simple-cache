window.C42=window.C42||{},C42.SimpleCache=function(){"use strict";var a=function(a){var b="SimpleCache::validateOptions";return void 0===a.cache?(console.warn(b+" : No cache. Required field"),!1):a.cachedObjectName?a.cacheInvalidators?"string"!=typeof a.cachedObjectName?(console.warn(b+" : No valid cachedObjectName"),!1):Array.isArray(a.cacheInvalidators)?0===a.cacheInvalidators.length?(console.warn(b+" : Empty cacheInvalidators. Not allowed to add a cached object without invalidators. To store data, use the store."),!1):!0:(console.warn(b+" : No valid cacheInvalidators. Should be an Array"),!1):(console.warn(b+" : No cacheInvalidators. Required field"),!1):(console.warn(b+" : No cachedObjectName. Required field"),!1)},b=function(a,b){for(var d,e=b.length-1;e>=0;e--)d=b[e],void 0!==f[d]?f[d].includes(a)||f[d].push(a):f[d]=[a]},c=function(a,b){var d,e;if(b&&b.length&&0!==b.length)for(var g=b.length-1;g>=0;g--)d=b[g],void 0!==f[d]&&(e=f[d].indexOf(a),-1!==e&&(f[d].splice(e,1),0===f[d].length&&delete f[d]));else for(var h=[],i=Object.keys(f),j=0;j<i.length;j++)d=i[j],f[d].includes(a)&&(f[d].splice(f[d].indexOf(a),1),0===f[d].length&&delete h[d])},d=[],e=[],f={};return{add:function(c){var f="SimpleCache::set";return c&&a(c)?(c.lastUpdate=new Date,c.valid=!0,e.includes(c.cachedObjectName)?(console.warn(f+" : Trying to add to the cache: '"+c.cachedObjectName+"'. It is already cached."),!1):(b(c.cachedObjectName,c.cacheInvalidators),d.push(c),e.push(c.cachedObjectName),!0)):(console.error(f+" : No valid cacheSetup provided updating a chached object"),!1)},update:function(b){var c="C42.SimpleCache::update";if(!b||!a(b))return console.error(c+" : No valid cacheSetup provided updating a chached object"),!1;if(!e.includes(b.cachedObjectName))return console.error(c+" : Trying to update '"+b.cachedObjectName+"'. It is not cached."),!1;b.lastUpdate=new Date,b.valid=!0;for(var j,g=e.indexOf(b.cachedObjectName),i=Object.keys(f),k=0;k<i.length;k++)invalidator=i[k],f[invalidator].includes(b.cachedObjectName)&&(b.cacheInvalidators.includes(invalidator)||(j=f[invalidator].indexOf(b.cachedObjectName),f[invalidator].splice(j,1),0===f[invalidator].length&&delete f[invalidator]));for(var l,m=0;m>b.cacheInvalidators.length;m++)l=b.cacheInvalidators[m],i.includes(l)?f[l].includes(b.cachedObjectName)||f[l].push(b.cachedObjectName):f[l]=[b.cachedObjectName];return d[g]=b,!0},remove:function(a){var b="SimpleCache::remove";if(!e.includes(a))return console.error(b+" : Trying to remove '"+a+"'. It is not cached."),!1;var f=e.indexOf(a);return c(d[f].cachedObjectName,d[f].cacheInvalidators),d.splice(f,1),e.splice(f,1),!0},invalidate:function(a){var b="SimpleCache::invalidate";if("string"==typeof a&&void 0===f[a])return console.warn(b+" : Trying to invalidate with the '"+a+"'. Not found"),!1;for(var i,h=f[a].slice(0),j=0;j<h.length;j++){if(i=h[j],!e.includes(i))return console.error(b+" : Trying to invalidator '"+i+"'. It is not cached."),!1;var k=e.indexOf(i);d.splice(k,1),e.splice(k,1),c(i)}return!0},get:function(a){var b="SimpleCache::get",c=e.indexOf(a);if(void 0!==c&&-1!==c){if(d[c].cachedObjectName===a)return d[c].cache;console.error(b+" : Indexs are broken. Restart component is required;")}},getAll:function(){for(var b={},c=0;c<d.length;c++)b[d[c].cachedObjectName]=d[c].cache;return b}}}();
