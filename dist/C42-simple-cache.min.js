window.C42=window.C42||{},C42.SimpleCache=function(){"use strict";var a=!1,b=function(){return{log:function(){a&&console.log.apply(console,arguments)},warn:function(){a&&console.warn.apply(console,arguments)},error:function(){a&&console.error.apply(console,arguments)}}}(),c=function(a){var c="SimpleCache::validateOptions";return void 0===a.cache?(b.warn(c+" : No cache. Required field"),!1):a.cachedObjectName?a.cacheInvalidators?"string"!=typeof a.cachedObjectName?(b.warn(c+" : No valid cachedObjectName"),!1):Array.isArray(a.cacheInvalidators)?0===a.cacheInvalidators.length?(b.warn(c+" : Empty cacheInvalidators. Not allowed to add a cached object without invalidators. To store data, use the store."),!1):!0:(b.warn(c+" : No valid cacheInvalidators. Should be an Array"),!1):(b.warn(c+" : No cacheInvalidators. Required field"),!1):(b.warn(c+" : No cachedObjectName. Required field"),!1)},d=function(a,b){for(var d,e=b.length-1;e>=0;e--)d=b[e],void 0!==i[d]?i[d].includes(a)||i[d].push(a):i[d]=[a]},e=function(a,b){var d,e;if(b&&b.length&&0!==b.length)for(var f=b.length-1;f>=0;f--)d=b[f],void 0!==i[d]&&(e=i[d].indexOf(a),-1!==e&&(i[d].splice(e,1),0===i[d].length&&delete i[d]));else for(var g=[],h=Object.keys(i),j=0;j<h.length;j++)d=h[j],i[d].includes(a)&&(i[d].splice(i[d].indexOf(a),1),0===i[d].length&&delete g[d])},f=function(a,b){for(var e,d=Object.keys(i),f=0;f<d.length;f++)invalidator=d[f],i[invalidator].includes(a)&&(b.includes(invalidator)||(e=i[invalidator].indexOf(a),i[invalidator].splice(e,1),0===i[invalidator].length&&delete i[invalidator]));for(var g,h=0;h>b.length;h++)g=b[h],d.includes(g)?i[g].includes(a)||i[g].push(a):i[g]=[a]},g=[],h=[],i={};return{add:function(a){var e="SimpleCache::set";return a&&c(a)?h.includes(a.cachedObjectName)?(b.warn(e+" : Trying to add to the cache: '"+a.cachedObjectName+"'. It is already cached."),!1):(a.lastUpdate=new Date,a.valid=!0,d(a.cachedObjectName,a.cacheInvalidators),g.push(a),h.push(a.cachedObjectName),!0):(b.error(e+" : No valid cacheSetup provided updating a chached object"),!1)},update:function(a){var d="C42.SimpleCache::update";if(!a||!c(a))return b.error(d+" : No valid cacheSetup provided updating a chached object"),!1;var e=h.indexOf(a.cachedObjectName);return-1===e?(b.error(d+" : Trying to update '"+a.cachedObjectName+"'. It is not cached."),!1):(a.lastUpdate=new Date,a.valid=!0,f(a.cachedObjectName,a.cacheInvalidators),g[e]=a,!0)},remove:function(a){var c="SimpleCache::remove";if(!h.includes(a))return b.error(c+" : Trying to remove '"+a+"'. It is not cached."),!1;var d=h.indexOf(a);return e(g[d].cachedObjectName,g[d].cacheInvalidators),g.splice(d,1),h.splice(d,1),!0},invalidate:function(a){var c="SimpleCache::invalidate";if("string"==typeof a&&void 0===i[a])return b.warn(c+" : Trying to invalidate with the '"+a+"'. Not found"),!1;for(var j,f=i[a].slice(0),k=0;k<f.length;k++){if(j=f[k],!h.includes(j))return b.error(c+" : Trying to invalidator '"+j+"'. It is not cached."),!1;var l=h.indexOf(j);g.splice(l,1),h.splice(l,1),e(j)}return!0},get:function(a){var c="SimpleCache::get",d=h.indexOf(a);if(void 0!==d&&-1!==d){if(g[d].cachedObjectName===a)return g[d].cache;b.error(c+" : Indexs are broken. Restart component is required;")}},getAll:function(){for(var b={},c=0;c<g.length;c++)b[g[c].cachedObjectName]=g[c].cache;return b}}}();
